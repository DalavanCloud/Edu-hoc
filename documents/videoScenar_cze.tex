\documentclass[12pt,titlepage]{article}
\usepackage[utf8]{inputenc}
\usepackage{a4wide}
\usepackage{graphicx}
\usepackage[czech]{babel}
\usepackage{multicol}
\usepackage{hyperref}
\title{Video}
\author{Lukáš Němec}



\begin{document}
\begin{titlepage}
\begin{center}
\textsc{\LARGE Scénář}\\[1cm]
\textsc{\Large WSN}\\[0.6cm]


\Large{Lukáš Němec}\\[1cm]

\bigskip
\bigskip

\Large{\today}
\end{center}
\end{titlepage}



\tableofcontents
\newpage


\section{Arduino všeobecně}
Arduino je open-source platforma a zároveň fenomén několika posledních let. Poskytuje jednak samotný hardware a jednak software pro programování mikrokontrolerů ATMega. V současné době už existuje nejenom velké množství oficiálních Arduino desek, ale zároveň se objevuje velké množství jejich klonů. Tyto jsou buď motivovány snahou vytvořit vlastní a levnější variantu svého Arduina, nebo naopak některou z oficiálních desek rozšířit o funkcionalitu navíc. Mezi první kategorii typicky patří čínské klony typu Funduino a další, zatímco druhá kategorie obsahuje například specializované desky, jako jsou námi používané JeeLink a JeeNode.

Jelikož se budeme zabývat ad-hoc sítěmi a senzorovými sítěmi, tak z celé platformy využijeme pouze vývojové prostředí, zatímco hardware použijeme specializovaný pro naše potřeby, především už bude obsahovat rádiový modul. Začněme však od úplných základů práce s Arduinem. Více všeobecných informací je možné najít na oficiálním webu 
\url{www.arduino.cc}.

	\subsection{Arduino IDE}
	Arduino IDE je velmi jednoduché prostředí pro vyvíjení programů, z praktického hlediska se jedná spíše o upravený textový editor s podporou pro Arduino. 
	Výhodou je podpora pro většinu běžných operačních systémů, tedy je možné vyvíjet jak pod linuxem, tak windows či OS X. Může fungovat buď bez instalace, nicméně tato varianta je vhodná pouze pro samotné programovaní v případě, že pouze potřebujete programovat a komunikace s Arduinem samotným Vás nezajímá. Pokud Vás však například zajímá komunikace s některou z desek přes sériové rozhraní, vyplatí se prostředí nainstalovat.
	
	Prostředí můžete využít i pokud se rozhodnete programovat ve svém oblíbeném textovém editoru a v Arduino IDE pouze kompilovat, či používat jiné nástroje které poskytuje.
		\paragraph{Instalace}
			Instalace samotná není složitý proces, spíše naopak. Spousta linuxových distribucí Vám práci usnadní, jelikož Arduino IDE se nachází v repositářích a jediné, co je potřeba pohlídat, je verze, která by měla být ideálně nejnovější dostupná, ideálně verze 1.5 a starší. 
			
			Pokud potřebujete instalovat jiným způsobem, pak veškeré potřebné informace naleznete na oficiálních stránkách \url{http://arduino.cc/en/Main/Software}.  
		\paragraph{Nástroje}
		
		\subparagraph{Verifikátor}
			Z nástrojů, které prostředí nabízí je tím nejdůležitějším verifikátor, který slouží k ověření syntaxe napsaného kódu. Tuto možnost bohužel prostředí nenabízí průběžně, tedy je vhodné relativně pravidelně syntaxi kontrolovat.
			
		\subparagraph{Kompilátor }
			Druhým podstatným nástrojem je kompilátor spojený s nahráváním na desku. Nejdříve je potřeba zvolit konkrétní model Arduina, případně model nejvíce podobný pro veškeré odvozené modely a klony.  Dále je třeba zkontrolovat nastavení portu, na který je konkrétní deska připojena. V případě, že je připojena pouze jedna většinou prostředí port vybere správně, nicméně kontrola je vhodná. Zároveň je možné mít připojeno více desek a poté je potřeba zvolit jednu konkrétní.
		
			V případě problémů s nalezením desky je vhodné restartovat celé prostředí, případně desku připojovat před spuštěním prostředí.
			
		\subparagraph{Serial monitor}
			Serial monitor je posledním důležitým nástrojem, který je vhodné znát. Jeho funkcionalitu sice lze nahradit pomocí jakéhokoliv programu, který umožňuje komunikovat přes sériový port (například PySerial), na druhou stranu je Serial Monitor tou nejednoduší variantou. 
			
			Při spuštění je třeba nastavit frekvenci komunikace (na stejnou hodnotu, jako ve zdrojovém kódu programu) a následně je možné číst informace zaslané z desky, nebo případně desce posílat instrukce. 
			
			Pokud ze zobrazují znaky, které však nedávají smysl, bude pravděpodobně problém s různě nastavenou frekvencí desky a Serial Monitoru. 
		
		
	\subsection{Základy syntaxe}
			Arduino je možné brát jako speciální případ jazyka C. Zůstává téměř vše a mění se pouze podoba funkce main, která je rozdělená na dvě části, \texttt{setup} a \texttt{loop}. 
			Tedy je možné psát for cykly jako v jazyce C, stejně tak podmínky, funkce a téměř cokoliv dalšího, co budete potřebovat. Navíc Arduino přidává některé vlastní funkce a velké množství knihoven, které především slouží k příjemnější manipulaci s veškerým možným příslušenstvím. Nicméně můžeme nalézt i různé jiné knihovny, které především usnadňují psaní kódu. 
			
		\paragraph{\textbf{\texttt{setup}}}
			Funkce sloužící k úvodnímu nastavení proměnných, počátečnímu spuštění a všem dalším úvodním nastavením. Při samotném spuštění se tato funkce zavolá jako první a právě jednou. Ideální je například ke spuštění komunikace po sériovém portu, nastavení pinů a inicializaci knihoven.
		
		\paragraph{\textbf{\texttt{loop}}}
			Funkce která provádí samotný běh programu, jak napovídá její název, tuto funkci můžeme vnímat jako nekonečný cyklus. Zavolá se až po funkci \texttt{setup}, tedy již můžeme počítat s inicializovaným prostředím a bude se volat neustále až do restartu desky nebo ztráty napájení. Zdrojový kód v této funkci je vhodné psát s ohledem na neustálé opakování a zároveň v případě, že potřebujeme něco pravidelně kontrolovat (stisknutí tlačítka) je vhodné mít buď celý kód dostatečně rychlý tak, aby kontrola probíhala v krátkých intervalech, nebo kontrolu provést několikrát za jeden průběh cyklu.\footnote{některé desky umožňují využít speciální piny k přerušení funkce \texttt{loop} a okamžité reakci na událost. K přerušení je možné připojit k speciální vlastní funkci, která vykoná jeho obsluhu}
			
		\paragraph{Serial}
			Jedna z nejdůležitějších knihoven slouží k ovládání sériového portu na straně desky. Na začátku je třeba ve funkci \texttt{setup} inicializovat společně s nastavením frekvence komunikace. Následně je možné jej začít používat, klidně již ve funkci \texttt{setup}. Všechny funkce této knihovny je třeba volat vždy jako \texttt{Serial.read()} nikoliv pouze \texttt{read()}.
			
			\subparagraph{\texttt{print}}
				Slouží k výpisu hodnot a ladících informací přes sériový vstup. Je možné tisknout hodnotu samotnou, případně ji i formátovat (vhodné například pro hexadecimální hodnoty). Taktéž je možné použít funkci \texttt{println}, která navíc pošle i ukončení řádku. Při používání je třeba dát pozor, jelikož funkce je 
				asynchronní, tedy vrátí návratovou hodnotu dříve, než začne odesílat znaky. 
				
				Pro obsluhu výstupu na sériovém portu je možné využít i funkce \texttt{write} (zápis binárních dat) nebo \texttt{flush} (počká na dokončení zápisu).
			
			\subparagraph{\texttt{read}}
				Slouží ke čtení ze sériového portu, přečtenou hodnotu vrací jako návratovou hodnotu. Vhodné je její spojení s funkcí \texttt{available}, která vrací počet bytů dostupných k přečtení. Ideální použití je buď k ovládání desky pomocí příkazů z počítače, nebo k počátečnímu nastavení, které není možné nastavit v kódu napevno. 
		
\section{WSN uzel, JeeLib}
  
	\subsection{JeeNode hardware}
		\paragraph{Všeobecná specifikace}
		\paragraph{Rádio}
		\paragraph{Piny}
	
	\subsection{JeeLib}
		\paragraph{Přidání do IDE}
		\paragraph{Formát hlavičky}
		\paragraph{Poslání zprávy}
		\paragraph{Přijetí zprávy}
		\paragraph{Síť ze dvou uzlů}
	
\section{WSN síť}
	\subsection{Ukázkové aplikace}
		\paragraph{Alive}
		\paragraph{Sniffer}
	 
	\subsection{Síť}
		\paragraph{Všeobecné parametry}
		\paragraph{Fixní routování}
	


\end{document}




